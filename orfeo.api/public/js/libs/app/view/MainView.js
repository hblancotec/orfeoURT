/*
 * File: app/view/MainView.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('AppTransferencias.view.MainView', {
    extend: 'Ext.container.Viewport',
    alias: 'widget.mainview',

    requires: [
        'Ext.grid.Panel',
        'Ext.grid.View',
        'Ext.grid.plugin.DragDrop',
        'Ext.util.Point',
        'Ext.grid.column.Column',
        'Ext.form.FieldContainer',
        'Ext.button.Button',
        'Ext.form.Panel',
        'Ext.form.field.ComboBox',
        'Ext.form.field.Date',
        'Ext.toolbar.Paging'
    ],

    itemId: 'mainView',
    layout: 'border',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'panel',
                    region: 'east',
                    split: true,
                    itemId: 'leftPanel',
                    width: 250,
                    collapsed: false,
                    collapsible: true,
                    title: 'Solicitud de Transferencias',
                    items: [
                        {
                            xtype: 'gridpanel',
                            height: 386,
                            title: 'Lista Selecionados ',
                            titleCollapse: true,
                            store: 'StoreListSeleccionados',
                            viewConfig: {
                                plugins: [
                                    Ext.create('Ext.grid.plugin.DragDrop', {
                                        dragGroup: 'ListSeleccionadosDDGroup',
                                        dropGroup: 'ListDDGroup'
                                    })
                                ],
                                listeners: {
                                    drop: {
                                        fn: me.onViewDrop1,
                                        scope: me
                                    }
                                }
                            },
                            columns: [
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'NoExpediente',
                                    text: 'NoExpediente'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'nombre',
                                    text: 'Nombre'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'fecha',
                                    text: 'Fecha'
                                }
                            ]
                        },
                        {
                            xtype: 'fieldcontainer',
                            height: 120,
                            width: 249,
                            fieldLabel: 'Label',
                            hideLabel: true,
                            layout: {
                                type: 'hbox',
                                align: 'middle',
                                pack: 'center'
                            },
                            items: [
                                {
                                    xtype: 'button',
                                    flex: 1,
                                    width: 125,
                                    icon: 'resources/images/pdf.ico',
                                    text: 'FUID'
                                },
                                {
                                    xtype: 'button',
                                    flex: 1,
                                    width: 125,
                                    text: 'Solicitar Transferencia'
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    region: 'center',
                    itemId: 'centerPanel',
                    layout: 'border',
                    items: [
                        {
                            xtype: 'panel',
                            flex: 1,
                            region: 'center',
                            split: true,
                            itemId: 'rightPanel',
                            header: false,
                            title: 'Top',
                            items: [
                                {
                                    xtype: 'form',
                                    border: false,
                                    height: 263,
                                    bodyPadding: 10,
                                    title: 'My Form',
                                    items: [
                                        {
                                            xtype: 'combobox',
                                            width: 488,
                                            fieldLabel: 'Dependencia'
                                        },
                                        {
                                            xtype: 'combobox',
                                            width: 488,
                                            fieldLabel: 'Serie',
                                            displayField: 'descripcion',
                                            store: 'StoreListSerie',
                                            valueField: 'codigoSerie',
                                            listeners: {
                                                select: {
                                                    fn: me.onComboboxSerieSelect,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'combobox',
                                            width: 487,
                                            fieldLabel: 'Sub Serie',
                                            displayField: 'descripcion',
                                            store: 'StoreListSubSerie',
                                            valueField: 'codigoSubSerie'
                                        },
                                        {
                                            xtype: 'fieldcontainer',
                                            height: 50,
                                            width: 481,
                                            fieldLabel: 'Label',
                                            hideLabel: true,
                                            layout: {
                                                type: 'hbox',
                                                align: 'middle'
                                            },
                                            items: [
                                                {
                                                    xtype: 'datefield',
                                                    flex: 1,
                                                    fieldLabel: 'Fecha Inicio'
                                                },
                                                {
                                                    xtype: 'datefield',
                                                    flex: 1,
                                                    width: 150,
                                                    fieldLabel: 'Fecha Fin'
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'textfield',
                                            anchor: '100%',
                                            fieldLabel: 'Nombre'
                                        },
                                        {
                                            xtype: 'fieldcontainer',
                                            height: 93,
                                            hideLabel: true,
                                            layout: {
                                                type: 'hbox',
                                                pack: 'center'
                                            },
                                            items: [
                                                {
                                                    xtype: 'button',
                                                    cls: 'search',
                                                    height: 27,
                                                    width: 82,
                                                    icon: 'search',
                                                    iconCls: 'search',
                                                    text: 'B&uacute;scar',
                                                    listeners: {
                                                        click: {
                                                            fn: me.onButtonBuscarClick,
                                                            scope: me
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            flex: 1,
                            region: 'south',
                            split: true,
                            height: 150,
                            itemId: 'bottomPanel',
                            header: false,
                            title: 'Bottom',
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    height: 300,
                                    title: 'Listado Expedientes',
                                    store: 'StoreList',
                                    viewConfig: {
                                        plugins: [
                                            Ext.create('Ext.grid.plugin.DragDrop', {
                                                dragGroup: 'ListDDGroup',
                                                dropGroup: 'ListSeleccionadosDDGroup'
                                            })
                                        ],
                                        listeners: {
                                            drop: {
                                                fn: me.onViewDrop,
                                                scope: me
                                            }
                                        }
                                    },
                                    columns: [
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'NoExpediente',
                                            text: 'NoExpediente'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'nombre',
                                            text: 'Nombre'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'fecha',
                                            text: 'Fecha'
                                        }
                                    ],
                                    dockedItems: [
                                        {
                                            xtype: 'pagingtoolbar',
                                            dock: 'bottom',
                                            width: 360,
                                            displayInfo: true,
                                            store: 'StoreList'
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onViewDrop1: function(node, data, overModel, dropPosition, eOpts) {
                var dropOn = overModel ? ' ' + dropPosition + ' ' + overModel.get('name') : ' on empty view';
    },

    onComboboxSerieSelect: function(combo, records, eOpts) {
        Ext.getStore('StoreListSubSerie').getProxy().setExtraParam( 'codigoSerie', records[0].data.codigoSerie );
        Ext.getStore('StoreListSubSerie').load();
    },

    onButtonBuscarClick: function(button, e, eOpts) {
                Ext.getStore('StoreList').getProxy().setExtraParam( 'codigoSerie', 0 );
                Ext.getStore('StoreList').load();
                Ext.getStore('StoreListSeleccionados').removeAll();
    },

    onViewDrop: function(node, data, overModel, dropPosition, eOpts) {
                var dropOn = overModel ? ' ' + dropPosition + ' ' + overModel.get('name') : ' on empty view';
    }

});